{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>{{ product.name }}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="shortcut icon" href="{% static 'assets/images/logo/favicon.svg' %}" type="image/x-icon">

</head>
<body class="bg-gradient-to-br from-pink-50 to-gray-100 min-h-screen">

  <!-- Cart Button Top-Right -->
  <div class="fixed top-4 right-4 z-50">
    <a href="{% url 'cart' %}" class="relative inline-flex items-center p-3 bg-[#FA8072] text-black rounded-full shadow-lg hover:bg-black hover:text-white transition-colors duration-300">
      <ion-icon name="bag-handle-outline" style="font-size: 1.8rem;"></ion-icon>
      <span class="absolute -top-1 -right-1 bg-black text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center">
        {{ cart_count }}
      </span>
    </a>
  </div>

  <!-- Product Card (Smaller) -->
  <div class="flex items-center justify-center px-4 py-12">
    <div class="max-w-4xl w-full bg-white rounded-2xl shadow-lg overflow-hidden grid grid-cols-1 md:grid-cols-2 gap-8 p-5 md:p-8">

      <!-- Image -->
      <div class="w-full h-full">
        <img src="{{ product.image.url }}" alt="{{ product.name }}"
             class="w-full h-full max-h-[400px] object-cover rounded-xl shadow-md hover:scale-105 transition-transform duration-300" />
      </div>

      <!-- Content -->
      <div class="flex flex-col justify-between">
        <div>
          <h1 class="text-3xl font-extrabold text-gray-900 mb-2">{{ product.name }}</h1>

          <p class="text-sm text-gray-500 mb-1">
            Category:
            <span class="font-semibold text-black">{{ product.category.name }}</span>
          </p>

          <p class="text-gray-700 text-base leading-relaxed my-3">{{ product.description }}</p>

          <div class="price-box text-2xl font-bold text-[#FA8072] flex items-center gap-3 mb-6">
            ${{ product.price }}
            {% if product.old_price %}
              <del class="text-gray-400 text-lg">${{ product.old_price }}</del>
            {% endif %}
          </div>
        </div>

        <!-- Buttons: Add to Cart + Add to Wishlist -->
        <div class="flex gap-4">
          <form method="post" action="{% url 'add_to_cart' product.id %}" class="flex-1">
            {% csrf_token %}
            <button type="submit"
                    class="w-full bg-[#FA8072] text-black font-semibold py-3 rounded-xl text-lg transition duration-300 hover:bg-black hover:text-white shadow-md hover:shadow-xl">
              Add to Cart
            </button>
          </form>

          <form method="post" action="{% url 'add_to_wishlist' product.id %}" class="flex-1">
            {% csrf_token %}
            <button type="submit"
                    class="w-full border-2 border-[#FA8072] text-[#FA8072] font-semibold py-3 rounded-xl text-lg transition duration-300 hover:bg-[#FA8072] hover:text-white shadow-md hover:shadow-xl">
              Add to Wishlist
            </button>
          </form>
        </div>
      </div>

    </div>
  </div>

  <!-- Toast Message -->
  {% if messages %}
    <div id="toast-message" class="fixed top-5 left-5 bg-green-500 text-white px-4 py-2 rounded shadow-lg text-sm z-50">
      {% for message in messages %}
        {{ message }}
      {% endfor %}
    </div>
    <script>
      setTimeout(() => {
        const toast = document.getElementById('toast-message');
        if (toast) toast.style.display = 'none';
      }, 2000);
    </script>
  {% endif %}

  <!-- Ionicons -->
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>
</html>
